Godot Engine v3.5.2.stable.official.170ba337a - https://godotengine.org
OpenGL ES 2.0 Renderer: Mesa Intel(R) Graphics (ADL GT2)
 
[DEBUG SINGLETON] Initialized - Press backtick (`) key for console
CoordinateManager initialized
Unknown District loaded
CoordinateManager: Current district set to Unknown District
Registered district with CoordinateManager
Navigation Signal Flow Test District loaded
CoordinateManager: Current district set to Navigation Signal Flow Test District
Registered district with CoordinateManager
Using standard walkable area: MainWalkableArea
Setting debug_draw to: True
ScrollingCamera._ready() called - Script Path: res://src/core/camera/scrolling_camera.gd
ScrollingCamera class loaded - Script ID: 1319
[TRACE] Camera initialized with screen size: (1424, 952)
[OVERLAY DEBUG] Created debug overlay
No target player set
Added scrolling camera to Navigation Signal Flow Test District with initial view: center
Added standard player character at position (960, 540)
Setting target_player to: Player:[Node2D:1331]
[CAMERA DEBUG] Camera state changed from IDLE to FOLLOWING_PLAYER
Camera set to follow player
Added standard player controller for point-and-click navigation
Creating input manager...
Creating dialog manager...
[CAMERA DEBUG] CoordinateManager singleton not available for registration
Camera found player: Player

========== DISTRICT BOUNDS CALCULATION STARTED ==========
Background dimensions: (1920, 1080)
Screen size: (1424, 952)
Current camera zoom: (1, 1)
Number of walkable areas: 1

========== BOUNDS CALCULATION STARTED ==========
Number of walkable areas: 1
Using get_polygon() interface method
Processing walkable area: MainWalkableArea with 12 points
Area transform: ((1, 0), (0, 1), (0, 0))
Point 0 - Local: (100, 100), Global: (100, 100)
Point 1 - Local: (800, 100), Global: (800, 100)
Point 2 - Local: (800, 400), Global: (800, 400)
Point 3 - Local: (1120, 400), Global: (1120, 400)
Point 4 - Local: (1120, 100), Global: (1120, 100)
Note: Rect2.expand() did not change bounds for point (1120, 100) - this is normal for some polygon arrangements
Point 5 - Local: (1820, 100), Global: (1820, 100)
Point 6 - Local: (1820, 980), Global: (1820, 980)
Point 7 - Local: (1120, 980), Global: (1120, 980)
Note: Rect2.expand() did not change bounds for point (1120, 980) - this is normal for some polygon arrangements
Point 8 - Local: (1120, 680), Global: (1120, 680)
Note: Rect2.expand() did not change bounds for point (1120, 680) - this is normal for some polygon arrangements
Point 9 - Local: (800, 680), Global: (800, 680)
Note: Rect2.expand() did not change bounds for point (800, 680) - this is normal for some polygon arrangements
Point 10 - Local: (800, 980), Global: (800, 980)
Note: Rect2.expand() did not change bounds for point (800, 980) - this is normal for some polygon arrangements
Point 11 - Local: (100, 980), Global: (100, 980)
Note: Rect2.expand() did not change bounds for point (100, 980) - this is normal for some polygon arrangements
Raw calculated bounds: (100, 100, 1720, 880)
Bounds after margin adjustment: (99, 99, 1722, 882)
Final corrected bounds: (99, 99, 1722, 882)
========== BOUNDS CALCULATION COMPLETED ==========

Viewport-aware height calculation: 952 * 0.3 = 285.6
Final district bounds: (99, 99, 1722, 882)
========== DISTRICT BOUNDS CALCULATION COMPLETED ==========

Camera bounds set from district: (99, 99, 1722, 882)
Initializing DefaultBoundsValidator with bounds: (99, 99, 1722, 882)
BoundsValidator initialized: Reference

===== CAMERA INITIAL POSITION SETUP =====
Current camera position: (0, 0)
Initial position setting: (0, 0)
Initial view setting: center
Screen size: (1424, 952)

===== CALCULATING OPTIMAL ZOOM =====
Found background sprite with texture size: (1920, 1080)
Current background scale: (1, 1)
Effective background size with current scale: (1920, 1080)
Scale needed to fill viewport height: 0.881481
Applied new scale to background: (0.881481, 0.881481)
[SCALING DEBUG] Background vertical positioning applied:
[SCALING DEBUG] - Viewport height: 952
[SCALING DEBUG] - Scaled background height: 952
[SCALING DEBUG] - Applied y_offset: 0
New effective background size: (1692.444458, 952)
Camera zoom left at 1.0 (since we're scaling the background)
Updated district.background_size to (1692.444458, 952)
Updated camera bounds to match scaled background for visual correctness: (0, 0, 1692.444458, 952)
Updated bounds validator with new camera bounds
===== ZOOM CALCULATION COMPLETE =====

Camera half size (screen size / 2 / zoom): (712, 476)
Camera bounds: (0, 0, 1692.444458, 952)
Background wide enough for scrolling: False
Background width: 1692.444458, Min width for scrolling: 2136
Using CENTER initial view setting
Positioning camera at center: (846.222229, 476)
Setting camera position to: (846.222229, 476)
Camera position after setting: (846, 476)
[CAMERA DEBUG] Checking camera position against walkable area center
[CAMERA DEBUG] Walkable area polygon points: [(100, 100), (800, 100), (800, 400), (1120, 400), (1120, 100), (1820, 100), (1820, 980), (1120, 980), (1120, 680), (800, 680), (800, 980), (100, 980)]
[CAMERA DEBUG] Calculated walkable area center: (960, 540)
[CAMERA DEBUG] Distance from camera to walkable center: 130.736374
Camera positioned for initial view: center at (846, 476)
View ratio: 84% of background is visible (1424 pixels of 1692.444458 pixels)
===== CAMERA INITIAL POSITION SETUP COMPLETE =====

[CAMERA DEBUG] Camera initialized in FOLLOWING_PLAYER state
Player linked to district: Navigation Signal Flow Test District
Player controller initialized
Connected to InputManager object_clicked signal
Found player: Player
Connected to player movement_state_changed signal
Connected to camera signals
Game Manager initialized
  [INFO] GameManager: found
  [INFO] InputManager: found
  [INFO] Player: found
  [INFO] Camera: found

============================================================
 NAVIGATION SIGNAL FLOW SUBSYSTEM TEST
============================================================


===== SCENARIO: Complete Click to Movement Flow =====

  Testing: signal_chain_order
  [ACTION] Simulating click at (1200, 600)
  [SIGNAL] input_object_clicked at 697 ms
  [SIGNAL] player_movement_state_changed at 697 ms
  [SIGNAL] gm_player_state_relayed at 697 ms
Player movement state changed to: 1
Moving to: (1334, 600)
  [SIGNAL] input_click_detected at 697 ms
  [SIGNAL] player_movement_state_changed at 946 ms
  [SIGNAL] gm_player_state_relayed at 946 ms
Player movement state changed to: 2
  [SIGNAL] player_movement_state_changed at 2627 ms
  [SIGNAL] gm_player_state_relayed at 2627 ms
Player movement state changed to: 3
  [SIGNAL] player_movement_state_changed at 2693 ms
  [SIGNAL] gm_player_state_relayed at 2693 ms
Player movement state changed to: 4
  [SIGNAL] player_movement_state_changed at 2793 ms
  [SIGNAL] gm_player_state_relayed at 2793 ms
Player movement state changed to: 0
    ✓ PASS: Signals should emit in correct order (2.11s)

  Testing: game_manager_signal_coordination
    ✓ PASS: GameManager should relay navigation signals (0.00s)

  Testing: signal_timing_consistency
    ✓ PASS: Signal timing should be consistent with no large gaps (0.00s)

===== SCENARIO: Multi-Component State Synchronization =====

  Testing: rapid_click_handling
  [ACTION] Rapid click 1 at (300, 300)
  [SIGNAL] input_object_clicked at 2827 ms
  [SIGNAL] player_movement_state_changed at 2827 ms
  [SIGNAL] gm_player_state_relayed at 2827 ms
Player movement state changed to: 1
Moving to: (434, 300)
  [SIGNAL] input_click_detected at 2827 ms
  [ACTION] Rapid click 2 at (1600, 300)
  [SIGNAL] input_click_detected at 2927 ms
  [ACTION] Rapid click 3 at (1600, 800)
  [SIGNAL] input_click_detected at 3043 ms
  [SIGNAL] player_movement_state_changed at 3076 ms
  [SIGNAL] gm_player_state_relayed at 3076 ms
Player movement state changed to: 2
  [ACTION] Rapid click 4 at (300, 800)
  [SIGNAL] input_object_clicked at 3160 ms
  [SIGNAL] player_movement_state_changed at 3160 ms
  [SIGNAL] gm_player_state_relayed at 3160 ms
Player movement state changed to: 1
Moving to: (434, 800)
  [SIGNAL] input_click_detected at 3160 ms
  [SIGNAL] player_movement_state_changed at 3176 ms
  [SIGNAL] gm_player_state_relayed at 3176 ms
Player movement state changed to: 2
    ✓ PASS: No race conditions during rapid clicks (2.46s)

  Testing: component_state_consistency
    ✓ PASS: All components maintain consistent state (0.00s)

===== SCENARIO: Edge Cases =====

  Testing: click_outside_walkable_area
  [ACTION] Clicking outside walkable area at (-100, -100)
  [SIGNAL] input_click_detected at 5307 ms
    ✓ PASS: Invalid clicks should not trigger movement (0.48s)

  Testing: click_during_movement
  [SIGNAL] input_object_clicked at 5790 ms
  [SIGNAL] player_movement_state_changed at 5790 ms
  [SIGNAL] gm_player_state_relayed at 5790 ms
Player movement state changed to: 1
Moving to: (634, 500)
  [SIGNAL] input_click_detected at 5790 ms
  [SIGNAL] player_movement_state_changed at 5806 ms
  [SIGNAL] gm_player_state_relayed at 5806 ms
Player movement state changed to: 2
  [SIGNAL] input_object_clicked at 6005 ms
  [SIGNAL] player_movement_state_changed at 6005 ms
  [SIGNAL] gm_player_state_relayed at 6005 ms
Player movement state changed to: 1
Moving to: (1534, 700)
  [SIGNAL] input_click_detected at 6005 ms
  [SIGNAL] player_movement_state_changed at 6404 ms
  [SIGNAL] gm_player_state_relayed at 6404 ms
Player movement state changed to: 2
ensure_valid_target called with position: (853.574585, 694.072266)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (853.574585, 694.072266) -> (853.574585, 476)
Position adjusted by bounds validator: (853.574585, 694.072266) -> (853.574585, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1410.574585, 694.072266) -> (847, 476)
ensure_valid_target called with position: (856.904053, 694.232178)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (856.904053, 694.232178) -> (856.904053, 476)
Position adjusted by bounds validator: (856.904053, 694.232178) -> (856.904053, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1413.904053, 694.232178) -> (848, 476)
ensure_valid_target called with position: (860.233521, 694.39209)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (860.233521, 694.39209) -> (860.233521, 476)
Position adjusted by bounds validator: (860.233521, 694.39209) -> (860.233521, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1417.233521, 694.39209) -> (850, 476)
ensure_valid_target called with position: (863.562988, 694.552002)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (863.562988, 694.552002) -> (863.562988, 476)
Position adjusted by bounds validator: (863.562988, 694.552002) -> (863.562988, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1420.562988, 694.552002) -> (852, 476)
ensure_valid_target called with position: (866.892456, 694.711914)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (866.892456, 694.711914) -> (866.892456, 476)
Position adjusted by bounds validator: (866.892456, 694.711914) -> (866.892456, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1423.892456, 694.711914) -> (854, 476)
ensure_valid_target called with position: (870.221924, 694.871826)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (870.221924, 694.871826) -> (870.221924, 476)
Position adjusted by bounds validator: (870.221924, 694.871826) -> (870.221924, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1427.221924, 694.871826) -> (856, 476)
ensure_valid_target called with position: (873.551392, 695.031738)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (873.551392, 695.031738) -> (873.551392, 476)
Position adjusted by bounds validator: (873.551392, 695.031738) -> (873.551392, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1430.551392, 695.031738) -> (858, 476)
ensure_valid_target called with position: (876.880859, 695.19165)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (876.880859, 695.19165) -> (876.880859, 476)
Position adjusted by bounds validator: (876.880859, 695.19165) -> (876.880859, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1433.880859, 695.19165) -> (860, 476)
ensure_valid_target called with position: (880.210327, 695.351562)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (880.210327, 695.351562) -> (880.210327, 476)
Position adjusted by bounds validator: (880.210327, 695.351562) -> (880.210327, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1437.210327, 695.351562) -> (863, 476)
ensure_valid_target called with position: (883.539795, 695.511475)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (883.539795, 695.511475) -> (883.539795, 476)
Position adjusted by bounds validator: (883.539795, 695.511475) -> (883.539795, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1440.539795, 695.511475) -> (866, 476)
ensure_valid_target called with position: (886.869263, 695.671387)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (886.869263, 695.671387) -> (886.869263, 476)
Position adjusted by bounds validator: (886.869263, 695.671387) -> (886.869263, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1443.869263, 695.671387) -> (869, 476)
ensure_valid_target called with position: (890.19873, 695.831299)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (890.19873, 695.831299) -> (890.19873, 476)
Position adjusted by bounds validator: (890.19873, 695.831299) -> (890.19873, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1447.19873, 695.831299) -> (872, 476)
ensure_valid_target called with position: (893.528198, 695.991211)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (893.528198, 695.991211) -> (893.528198, 476)
Position adjusted by bounds validator: (893.528198, 695.991211) -> (893.528198, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1450.528198, 695.991211) -> (875, 476)
ensure_valid_target called with position: (896.857666, 696.151123)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (896.857666, 696.151123) -> (896.857666, 476)
Position adjusted by bounds validator: (896.857666, 696.151123) -> (896.857666, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1453.857666, 696.151123) -> (878, 476)
ensure_valid_target called with position: (900.187134, 696.311035)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (900.187134, 696.311035) -> (900.187134, 476)
Position adjusted by bounds validator: (900.187134, 696.311035) -> (900.187134, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1457.187134, 696.311035) -> (881, 476)
ensure_valid_target called with position: (903.516602, 696.470947)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (903.516602, 696.470947) -> (903.516602, 476)
Position adjusted by bounds validator: (903.516602, 696.470947) -> (903.516602, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1460.516602, 696.470947) -> (884, 476)
ensure_valid_target called with position: (906.846069, 696.630859)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (906.846069, 696.630859) -> (906.846069, 476)
Position adjusted by bounds validator: (906.846069, 696.630859) -> (906.846069, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1463.846069, 696.630859) -> (887, 476)
ensure_valid_target called with position: (910.175537, 696.790771)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (910.175537, 696.790771) -> (910.175537, 476)
Position adjusted by bounds validator: (910.175537, 696.790771) -> (910.175537, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1467.175537, 696.790771) -> (890, 476)
ensure_valid_target called with position: (913.505005, 696.950684)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (913.505005, 696.950684) -> (913.505005, 476)
Position adjusted by bounds validator: (913.505005, 696.950684) -> (913.505005, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1470.505005, 696.950684) -> (893, 476)
ensure_valid_target called with position: (916.834473, 697.110596)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (916.834473, 697.110596) -> (916.834473, 476)
Position adjusted by bounds validator: (916.834473, 697.110596) -> (916.834473, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1473.834473, 697.110596) -> (896, 476)
ensure_valid_target called with position: (920.16394, 697.270508)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (920.16394, 697.270508) -> (920.16394, 476)
Position adjusted by bounds validator: (920.16394, 697.270508) -> (920.16394, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1477.16394, 697.270508) -> (899, 476)
ensure_valid_target called with position: (923.493408, 697.43042)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (923.493408, 697.43042) -> (923.493408, 476)
Position adjusted by bounds validator: (923.493408, 697.43042) -> (923.493408, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1480.493408, 697.43042) -> (902, 476)
ensure_valid_target called with position: (926.822876, 697.590332)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (926.822876, 697.590332) -> (926.822876, 476)
Position adjusted by bounds validator: (926.822876, 697.590332) -> (926.822876, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1483.822876, 697.590332) -> (905, 476)
ensure_valid_target called with position: (930.152344, 697.750244)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (930.152344, 697.750244) -> (930.152344, 476)
Position adjusted by bounds validator: (930.152344, 697.750244) -> (930.152344, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1487.152344, 697.750244) -> (908, 476)
ensure_valid_target called with position: (933.481812, 697.910156)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (933.481812, 697.910156) -> (933.481812, 476)
Position adjusted by bounds validator: (933.481812, 697.910156) -> (933.481812, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1490.481812, 697.910156) -> (911, 476)
ensure_valid_target called with position: (936.811279, 698.070068)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (936.811279, 698.070068) -> (936.811279, 476)
Position adjusted by bounds validator: (936.811279, 698.070068) -> (936.811279, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1493.811279, 698.070068) -> (914, 476)
ensure_valid_target called with position: (940.140747, 698.22998)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (940.140747, 698.22998) -> (940.140747, 476)
Position adjusted by bounds validator: (940.140747, 698.22998) -> (940.140747, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1497.140747, 698.22998) -> (917, 476)
ensure_valid_target called with position: (943.470215, 698.389893)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (943.470215, 698.389893) -> (943.470215, 476)
Position adjusted by bounds validator: (943.470215, 698.389893) -> (943.470215, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1500.470215, 698.389893) -> (920, 476)
ensure_valid_target called with position: (946.799683, 698.549805)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (946.799683, 698.549805) -> (946.799683, 476)
Position adjusted by bounds validator: (946.799683, 698.549805) -> (946.799683, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1503.799683, 698.549805) -> (923, 476)
ensure_valid_target called with position: (950.12915, 698.709656)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (950.12915, 698.709656) -> (950.12915, 476)
Position adjusted by bounds validator: (950.12915, 698.709656) -> (950.12915, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1507.12915, 698.709656) -> (927, 476)
ensure_valid_target called with position: (953.458618, 698.869568)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (953.458618, 698.869568) -> (953.458618, 476)
Position adjusted by bounds validator: (953.458618, 698.869568) -> (953.458618, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1510.458618, 698.869568) -> (930, 476)
ensure_valid_target called with position: (956.788086, 699.029419)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (956.788086, 699.029419) -> (956.788086, 476)
Position adjusted by bounds validator: (956.788086, 699.029419) -> (956.788086, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1513.788086, 699.029419) -> (933, 476)
ensure_valid_target called with position: (960.117554, 699.189331)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (960.117554, 699.189331) -> (960.117554, 476)
Position adjusted by bounds validator: (960.117554, 699.189331) -> (960.117554, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1517.117554, 699.189331) -> (937, 476)
  [SIGNAL] player_movement_state_changed at 10149 ms
  [SIGNAL] gm_player_state_relayed at 10149 ms
Player movement state changed to: 3
ensure_valid_target called with position: (963.447021, 699.349182)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (963.447021, 699.349182) -> (963.447021, 476)
Position adjusted by bounds validator: (963.447021, 699.349182) -> (963.447021, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1520.447021, 699.349182) -> (940, 476)
ensure_valid_target called with position: (966.776489, 699.509094)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (966.776489, 699.509094) -> (966.776489, 476)
Position adjusted by bounds validator: (966.776489, 699.509094) -> (966.776489, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1523.776489, 699.509094) -> (943, 476)
ensure_valid_target called with position: (970.105957, 699.668945)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (970.105957, 699.668945) -> (970.105957, 476)
Position adjusted by bounds validator: (970.105957, 699.668945) -> (970.105957, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1527.105957, 699.668945) -> (947, 476)
ensure_valid_target called with position: (973.435425, 699.828857)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (973.435425, 699.828857) -> (973.435425, 476)
Position adjusted by bounds validator: (973.435425, 699.828857) -> (973.435425, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1530.435425, 699.828857) -> (950, 476)
  [SIGNAL] player_movement_state_changed at 10215 ms
  [SIGNAL] gm_player_state_relayed at 10215 ms
Player movement state changed to: 4
ensure_valid_target called with position: (977, 700)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (977, 700) -> (977, 476)
Position adjusted by bounds validator: (977, 700) -> (977, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1534, 700) -> (954, 476)
ensure_valid_target called with position: (977, 700)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (977, 700) -> (977, 476)
Position adjusted by bounds validator: (977, 700) -> (977, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1534, 700) -> (957, 476)
ensure_valid_target called with position: (977, 700)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (977, 700) -> (977, 476)
Position adjusted by bounds validator: (977, 700) -> (977, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1534, 700) -> (960, 476)
ensure_valid_target called with position: (977, 700)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (977, 700) -> (977, 476)
Position adjusted by bounds validator: (977, 700) -> (977, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1534, 700) -> (962, 476)
ensure_valid_target called with position: (977, 700)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (977, 700) -> (977, 476)
Position adjusted by bounds validator: (977, 700) -> (977, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1534, 700) -> (964, 476)
ensure_valid_target called with position: (977, 700)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (977, 700) -> (977, 476)
Position adjusted by bounds validator: (977, 700) -> (977, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1534, 700) -> (966, 476)
  [SIGNAL] player_movement_state_changed at 10315 ms
  [SIGNAL] gm_player_state_relayed at 10315 ms
Player movement state changed to: 0
ensure_valid_target called with position: (977, 700)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (977, 700) -> (977, 476)
Position adjusted by bounds validator: (977, 700) -> (977, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1534, 700) -> (967, 476)
    ✗ FAIL: Clicks during movement should update destination (4.54s)
ensure_valid_target called with position: (977, 700)
Current test_mode value: False
Camera half size: (712, 476)
Position adjusted by bounds: (977, 700) -> (977, 476)
Position adjusted by bounds validator: (977, 700) -> (977, 476)
[CAMERA DEBUG] Smoothing value: 5, weight: 0.083333
[CAMERA DEBUG] Using normal interpolation
[CAMERA DEBUG] Camera following player: (1534, 700) -> (968, 476)

--------------------------------------------------
 Test Summary
--------------------------------------------------
Tests Passed: 6
Tests Failed: 1

Failed Tests:
  - click_during_movement

Signal Sequence Captured:
  1. input_object_clicked
  2. player_movement_state_changed
  3. gm_player_state_relayed
  4. input_click_detected
  5. player_movement_state_changed
  6. gm_player_state_relayed
  7. player_movement_state_changed
  8. gm_player_state_relayed
  9. player_movement_state_changed
  10. gm_player_state_relayed
Cleaned up all signal connections
ERROR: Condition "_first != nullptr" is true.
   at: ~List (./core/self_list.h:108)
ERROR: Condition "_first != nullptr" is true.
   at: ~List (./core/self_list.h:108)
WARNING: ObjectDB instances leaked at exit (run with --verbose for details).
     at: cleanup (core/object.cpp:2070)
ERROR: Resources still in use at exit (run with --verbose for details).
   at: clear (core/resource.cpp:417)
