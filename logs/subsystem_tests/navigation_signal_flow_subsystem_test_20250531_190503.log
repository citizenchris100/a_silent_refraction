Godot Engine v3.5.2.stable.official.170ba337a - https://godotengine.org
OpenGL ES 2.0 Renderer: Mesa Intel(R) Graphics (ADL GT2)
 
[DEBUG SINGLETON] Initialized - Press backtick (`) key for console
CoordinateManager initialized
Unknown District loaded
CoordinateManager: Current district set to Unknown District
Registered district with CoordinateManager
Navigation Signal Flow Test District loaded
CoordinateManager: Current district set to Navigation Signal Flow Test District
Registered district with CoordinateManager
Using standard walkable area: MainWalkableArea
Setting debug_draw to: True
ScrollingCamera._ready() called - Script Path: res://src/core/camera/scrolling_camera.gd
ScrollingCamera class loaded - Script ID: 1319
[TRACE] Camera initialized with screen size: (1424, 952)
[OVERLAY DEBUG] Created debug overlay
No target player set
Added scrolling camera to Navigation Signal Flow Test District with initial view: center
Added standard player character at position (960, 540)
Setting target_player to: Player:[Node2D:1331]
[CAMERA DEBUG] Camera state changed from IDLE to FOLLOWING_PLAYER
Camera set to follow player
Added standard player controller for point-and-click navigation
Creating input manager...
Creating dialog manager...
[CAMERA DEBUG] CoordinateManager singleton not available for registration
Camera found player: Player

========== DISTRICT BOUNDS CALCULATION STARTED ==========
Background dimensions: (1920, 1080)
Screen size: (1424, 952)
Current camera zoom: (1, 1)
Number of walkable areas: 1

========== BOUNDS CALCULATION STARTED ==========
Number of walkable areas: 1
Using get_polygon() interface method
Processing walkable area: MainWalkableArea with 12 points
Area transform: ((1, 0), (0, 1), (0, 0))
Point 0 - Local: (100, 100), Global: (100, 100)
Point 1 - Local: (800, 100), Global: (800, 100)
Point 2 - Local: (800, 400), Global: (800, 400)
Point 3 - Local: (1120, 400), Global: (1120, 400)
Point 4 - Local: (1120, 100), Global: (1120, 100)
Note: Rect2.expand() did not change bounds for point (1120, 100) - this is normal for some polygon arrangements
Point 5 - Local: (1820, 100), Global: (1820, 100)
Point 6 - Local: (1820, 980), Global: (1820, 980)
Point 7 - Local: (1120, 980), Global: (1120, 980)
Note: Rect2.expand() did not change bounds for point (1120, 980) - this is normal for some polygon arrangements
Point 8 - Local: (1120, 680), Global: (1120, 680)
Note: Rect2.expand() did not change bounds for point (1120, 680) - this is normal for some polygon arrangements
Point 9 - Local: (800, 680), Global: (800, 680)
Note: Rect2.expand() did not change bounds for point (800, 680) - this is normal for some polygon arrangements
Point 10 - Local: (800, 980), Global: (800, 980)
Note: Rect2.expand() did not change bounds for point (800, 980) - this is normal for some polygon arrangements
Point 11 - Local: (100, 980), Global: (100, 980)
Note: Rect2.expand() did not change bounds for point (100, 980) - this is normal for some polygon arrangements
Raw calculated bounds: (100, 100, 1720, 880)
Bounds after margin adjustment: (99, 99, 1722, 882)
Final corrected bounds: (99, 99, 1722, 882)
========== BOUNDS CALCULATION COMPLETED ==========

Viewport-aware height calculation: 952 * 0.3 = 285.6
Final district bounds: (99, 99, 1722, 882)
========== DISTRICT BOUNDS CALCULATION COMPLETED ==========

Camera bounds set from district: (99, 99, 1722, 882)
Initializing DefaultBoundsValidator with bounds: (99, 99, 1722, 882)
BoundsValidator initialized: Reference

===== CAMERA INITIAL POSITION SETUP =====
Current camera position: (0, 0)
Initial position setting: (0, 0)
Initial view setting: center
Screen size: (1424, 952)

===== CALCULATING OPTIMAL ZOOM =====
Found background sprite with texture size: (1920, 1080)
Current background scale: (1, 1)
Effective background size with current scale: (1920, 1080)
Scale needed to fill viewport height: 0.881481
Applied new scale to background: (0.881481, 0.881481)
[SCALING DEBUG] Background vertical positioning applied:
[SCALING DEBUG] - Viewport height: 952
[SCALING DEBUG] - Scaled background height: 952
[SCALING DEBUG] - Applied y_offset: 0
New effective background size: (1692.444458, 952)
Camera zoom left at 1.0 (since we're scaling the background)
Updated district.background_size to (1692.444458, 952)
Updated camera bounds to match scaled background for visual correctness: (0, 0, 1692.444458, 952)
Updated bounds validator with new camera bounds
===== ZOOM CALCULATION COMPLETE =====

Camera half size (screen size / 2 / zoom): (712, 476)
Camera bounds: (0, 0, 1692.444458, 952)
Background wide enough for scrolling: False
Background width: 1692.444458, Min width for scrolling: 2136
Using CENTER initial view setting
Positioning camera at center: (846.222229, 476)
Setting camera position to: (846.222229, 476)
Camera position after setting: (846, 476)
[CAMERA DEBUG] Checking camera position against walkable area center
[CAMERA DEBUG] Walkable area polygon points: [(100, 100), (800, 100), (800, 400), (1120, 400), (1120, 100), (1820, 100), (1820, 980), (1120, 980), (1120, 680), (800, 680), (800, 980), (100, 980)]
[CAMERA DEBUG] Calculated walkable area center: (960, 540)
[CAMERA DEBUG] Distance from camera to walkable center: 130.736374
Camera positioned for initial view: center at (846, 476)
View ratio: 84% of background is visible (1424 pixels of 1692.444458 pixels)
===== CAMERA INITIAL POSITION SETUP COMPLETE =====

[CAMERA DEBUG] Camera initialized in FOLLOWING_PLAYER state
Player linked to district: Navigation Signal Flow Test District
Player controller initialized
Connected to InputManager object_clicked signal
Found player: Player
Connected to player movement_state_changed signal
Connected to camera signals
Game Manager initialized
  [INFO] GameManager: found
  [INFO] InputManager: found
  [INFO] Player: found
  [INFO] Camera: found

============================================================
 NAVIGATION SIGNAL FLOW SUBSYSTEM TEST
============================================================


===== SCENARIO: Complete Click to Movement Flow =====

  Testing: signal_chain_order
  [ACTION] Simulating click at (1200, 600)
  [SIGNAL] input_object_clicked at 731 ms
  [SIGNAL] player_movement_state_changed at 731 ms
  [SIGNAL] gm_player_state_relayed at 731 ms
Player movement state changed to: 1
Moving to: (1334, 600)
  [SIGNAL] input_click_detected at 731 ms
SCRIPT ERROR: Invalid operands 'int' and 'String' in operator '=='.
          at: wait_for_movement_completion (res://src/subsystem_tests/navigation_signal_flow_subsystem_test.gd:388)
SCRIPT ERROR: First argument of yield() not of type object.
          at: test_complete_navigation_flow (res://src/subsystem_tests/navigation_signal_flow_subsystem_test.gd:257)
  [SIGNAL] player_movement_state_changed at 980 ms
  [SIGNAL] gm_player_state_relayed at 980 ms
Player movement state changed to: 2
  [SIGNAL] player_movement_state_changed at 2660 ms
  [SIGNAL] gm_player_state_relayed at 2660 ms
Player movement state changed to: 3
  [SIGNAL] player_movement_state_changed at 2727 ms
  [SIGNAL] gm_player_state_relayed at 2727 ms
Player movement state changed to: 4
  [SIGNAL] player_movement_state_changed at 2827 ms
  [SIGNAL] gm_player_state_relayed at 2827 ms
Player movement state changed to: 0
