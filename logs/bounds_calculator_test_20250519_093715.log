Godot Engine v3.5.2.stable.official.170ba337a - https://godotengine.org
OpenGL ES 2.0 Renderer: Mesa Intel(R) Graphics (ADL GT2)
 
[DEBUG SINGLETON] Initialized - Press backtick (`) key for console
CoordinateManager initialized
Setting up BoundsCalculator test...
Starting BoundsCalculator tests...
===== TEST SUITE: Bounds Calculation =====
Running test: Calculate Bounds Simple

========== BOUNDS CALCULATION STARTED ==========
Number of walkable areas: 1
Using get_polygon() interface method
Processing walkable area: TestPolygon with 4 points
Area transform: ((1, 0), (0, 1), (0, 0))
Point 0 - Local: (0, 0), Global: (0, 0)
Point 1 - Local: (100, 0), Global: (100, 0)
Point 2 - Local: (100, 100), Global: (100, 100)
Point 3 - Local: (0, 100), Global: (0, 100)
Note: Rect2.expand() did not change bounds for point (0, 100) - this is normal for some polygon arrangements
Raw calculated bounds: (0, 0, 100, 100)
Final corrected bounds: (0, 0, 100, 100)
========== BOUNDS CALCULATION COMPLETED ==========

✓ PASS: Calculate Bounds Simple: calculate_bounds_from_walkable_areas should compute correct bounds for simple rectangle
SCRIPT ERROR: Invalid get index 'Calculate' (on base: 'Dictionary').
          at: end_test (res://src/unit_tests/bounds_calculator_test.gd:483)
Running test: Calculate Bounds Multiple

========== BOUNDS CALCULATION STARTED ==========
Number of walkable areas: 2
Using get_polygon() interface method
Processing walkable area: TestPolygon with 4 points
Area transform: ((1, 0), (0, 1), (0, 0))
Point 0 - Local: (0, 0), Global: (0, 0)
Point 1 - Local: (100, 0), Global: (100, 0)
Point 2 - Local: (100, 100), Global: (100, 100)
Point 3 - Local: (0, 100), Global: (0, 100)
Note: Rect2.expand() did not change bounds for point (0, 100) - this is normal for some polygon arrangements
Using get_polygon() interface method
Processing walkable area: @TestPolygon@4 with 4 points
Area transform: ((1, 0), (0, 1), (0, 0))
Point 0 - Local: (200, 200), Global: (200, 200)
Point 1 - Local: (300, 200), Global: (300, 200)
Point 2 - Local: (300, 300), Global: (300, 300)
Point 3 - Local: (200, 300), Global: (200, 300)
Note: Rect2.expand() did not change bounds for point (200, 300) - this is normal for some polygon arrangements
Raw calculated bounds: (0, 0, 300, 300)
Final corrected bounds: (0, 0, 300, 300)
========== BOUNDS CALCULATION COMPLETED ==========

✓ PASS: Calculate Bounds Multiple: calculate_bounds_from_walkable_areas should compute bounds that contain all walkable areas
SCRIPT ERROR: Invalid get index 'Calculate' (on base: 'Dictionary').
          at: end_test (res://src/unit_tests/bounds_calculator_test.gd:483)
Running test: Calculate Bounds Complex

========== BOUNDS CALCULATION STARTED ==========
Number of walkable areas: 1
Using get_polygon() interface method
Processing walkable area: TestPolygon with 6 points
Area transform: ((1, 0), (0, 1), (0, 0))
Point 0 - Local: (0, 0), Global: (0, 0)
Point 1 - Local: (100, 0), Global: (100, 0)
Point 2 - Local: (100, 50), Global: (100, 50)
Point 3 - Local: (50, 50), Global: (50, 50)
Note: Rect2.expand() did not change bounds for point (50, 50) - this is normal for some polygon arrangements
Point 4 - Local: (50, 100), Global: (50, 100)
Point 5 - Local: (0, 100), Global: (0, 100)
Note: Rect2.expand() did not change bounds for point (0, 100) - this is normal for some polygon arrangements
Raw calculated bounds: (0, 0, 100, 100)
Final corrected bounds: (0, 0, 100, 100)
========== BOUNDS CALCULATION COMPLETED ==========

✓ PASS: Calculate Bounds Complex: calculate_bounds_from_walkable_areas should compute correct bounds for complex shapes
SCRIPT ERROR: Invalid get index 'Calculate' (on base: 'Dictionary').
          at: end_test (res://src/unit_tests/bounds_calculator_test.gd:483)
SCRIPT ERROR: Invalid get index 'Calculate' (on base: 'Dictionary').
          at: end_test_suite (res://src/unit_tests/bounds_calculator_test.gd:466)
===== TEST SUITE: Safety Corrections =====
Running test: Small Height Correction

========== BOUNDS CALCULATION STARTED ==========
Number of walkable areas: 1
Using get_polygon() interface method
Processing walkable area: TestPolygon with 4 points
Area transform: ((1, 0), (0, 1), (0, 0))
Point 0 - Local: (0, 0), Global: (0, 0)
Point 1 - Local: (500, 0), Global: (500, 0)
Point 2 - Local: (500, 20), Global: (500, 20)
Point 3 - Local: (0, 20), Global: (0, 20)
Note: Rect2.expand() did not change bounds for point (0, 20) - this is normal for some polygon arrangements
Raw calculated bounds: (0, 0, 500, 20)
INFO: Walkable area height is 20 pixels
This is normal for floor-based walkable areas
Adjusting camera height bounds to 200 pixels for better visibility
This preserves the exact floor walkable area while improving camera view
Final corrected bounds: (0, -90, 500, 200)
========== BOUNDS CALCULATION COMPLETED ==========

✗ FAIL: Small Height Correction: apply_safety_corrections should increase height for floor-like walkable areas while preserving center
SCRIPT ERROR: Invalid get index 'Small' (on base: 'Dictionary').
          at: end_test (res://src/unit_tests/bounds_calculator_test.gd:487)
Running test: Small Width Correction

========== BOUNDS CALCULATION STARTED ==========
Number of walkable areas: 1
Using get_polygon() interface method
Processing walkable area: TestPolygon with 4 points
Area transform: ((1, 0), (0, 1), (0, 0))
Point 0 - Local: (0, 0), Global: (0, 0)
Point 1 - Local: (20, 0), Global: (20, 0)
Point 2 - Local: (20, 500), Global: (20, 500)
Point 3 - Local: (0, 500), Global: (0, 500)
Note: Rect2.expand() did not change bounds for point (0, 500) - this is normal for some polygon arrangements
Raw calculated bounds: (0, 0, 20, 500)
ERROR: WARNING: Suspicious bounds width detected: 20
   at: call (modules/gdscript/gdscript_functions.cpp:775)
Enforced minimum bounds width
Final corrected bounds: (-90, 0, 200, 500)
========== BOUNDS CALCULATION COMPLETED ==========

✗ FAIL: Small Width Correction: apply_safety_corrections should increase width for very narrow walkable areas
SCRIPT ERROR: Invalid get index 'Small' (on base: 'Dictionary').
          at: end_test (res://src/unit_tests/bounds_calculator_test.gd:487)
Running test: Background Size Consideration
SCRIPT ERROR: Invalid set index 'background_size' (on base: 'Node2D') with value of type 'Vector2'.
          at: test_background_size_consideration (res://src/unit_tests/bounds_calculator_test.gd:278)
SCRIPT ERROR: First argument of yield() not of type object.
          at: test_safety_corrections_suite (res://src/unit_tests/bounds_calculator_test.gd:91)
