=== Test: coordinate_manager_test ===
Exit code: 124
Godot Engine v3.5.2.stable.official.170ba337a - https://godotengine.org
OpenGL ES 2.0 Renderer: Mesa Intel(R) Graphics (ADL GT2)
 
[DEBUG SINGLETON] Initialized - Press backtick (`) key for console
CoordinateManager initialized
Setting up CoordinateManager test...
SCRIPT ERROR: Parse Error: Unexpected indentation.
          at: GDScript::reload (built-in:2)
SCRIPT ERROR: Invalid get index 'background_scale_factor' (on base: 'Node2D').
          at: create_mock_district (res://src/unit_tests/coordinate_manager_test.gd:90)
Created mock camera with position: (500, 500), zoom: (1, 1)
Creating CoordinateManager instance
CoordinateManager initialized
CoordinateManager instance created and configured
Starting CoordinateManager tests...
===== TEST SUITE: District Management =====
Running test: Set Current District
SCRIPT ERROR: Parse Error: Unexpected indentation.
          at: GDScript::reload (built-in:2)
SCRIPT ERROR: Invalid get index 'district_name' (on base: 'Node2D').
          at: set_current_district (res://src/core/coordinate_manager.gd:33)
✓ PASS: Set Current District: set_current_district should update the current district reference
Running test: Get Current District
✓ PASS: Get Current District: get_current_district should return the current district reference
Running test: Handle Null District
ERROR: CoordinateManager: screen_to_world - No camera found
   at: call (modules/gdscript/gdscript_functions.cpp:775)
✓ PASS: Handle Null District: CoordinateManager should handle null district gracefully
Suite completed: 1/1 tests passed
===== TEST SUITE: View Mode Management =====
Running test: Set View Mode
CoordinateManager: View mode changed to WORLD_VIEW
✓ PASS: Set View Mode: set_view_mode should update the current view mode
Running test: Get View Mode
✓ PASS: Get View Mode: get_view_mode should return the current view mode
Running test: Detect View Mode
✗ FAIL: Detect View Mode: detect_view_mode_from_debug should detect and set correct view mode
Suite completed: 0/1 tests passed
===== TEST SUITE: Coordinate Transformations =====
Running test: Screen to World
ERROR: CoordinateManager: screen_to_world - No camera found
   at: call (modules/gdscript/gdscript_functions.cpp:775)
✗ FAIL: Screen to World: screen_to_world should map viewport center to camera position
Running test: World to Screen
ERROR: CoordinateManager: world_to_screen - No camera found
   at: call (modules/gdscript/gdscript_functions.cpp:775)
✗ FAIL: World to Screen: world_to_screen should map camera position to viewport center
Running test: Local to World
✓ PASS: Local to World: local_to_world should correctly transform local coordinates to world coordinates
Running test: World to Local
✓ PASS: World to Local: world_to_local should correctly transform world coordinates to local coordinates
Running test: Transform Coordinates
ERROR: CoordinateManager: screen_to_world - No camera found
   at: call (modules/gdscript/gdscript_functions.cpp:775)
ERROR: CoordinateManager: world_to_screen - No camera found
   at: call (modules/gdscript/gdscript_functions.cpp:775)
✓ PASS: Transform Coordinates: transform_coordinates should correctly handle coordinate space transformations
Suite completed: 1/1 tests passed
===== TEST SUITE: View Mode Transformations =====
Running test: World to Game View
SCRIPT ERROR: Invalid get index 'background_scale_factor' (on base: 'Node2D').
          at: test_world_to_game_view (res://src/unit_tests/coordinate_manager_test.gd:529)
SCRIPT ERROR: First argument of yield() not of type object.
          at: test_view_mode_transformations_suite (res://src/unit_tests/coordinate_manager_test.gd:196)

